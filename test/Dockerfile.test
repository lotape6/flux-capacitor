FROM ubuntu:22.04

# Install minimal dependencies
RUN apt-get update && apt-get install -y sudo

WORKDIR /workspace
COPY . .

# Make all scripts executable
RUN chmod +x install.sh uninstall.sh
RUN chmod +x test/*.sh

# Run the test script and ensure the image exits with the script's exit code
CMD ["bash", "-c", "cd test && ./test_installation.sh"]